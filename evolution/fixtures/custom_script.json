[
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Project",
  "modified": "2020-02-20 11:36:14.709150",
  "name": "Project-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Project\", \"onload\", function(frm) {var expected_end_date = frappe.datetime.add_days(frm.doc.expected_start_date, 7);\nif (frm.doc.expected_end_date == null){\nfrm.set_value(\"expected_end_date\", expected_end_date);}\n})\n\nfrappe.ui.form.on(\"Project\", \"onload\", function(frm) {cur_frm.set_value('work_order', frm.doc.name);});\nfrappe.ui.form.on(\"Project\", \"onload\", function(frm) {cur_frm.set_value('project_name', frm.doc.name);});\ncur_frm.cscript.custom_settings = function(doc) {\ncur_frm.set_query(\"item_code\", function() {return {\"filters\": {\"item_group\": \"Units\"}};});\ncur_frm.set_query(\"serial_no\", function() {return {\"filters\": {\"item_code\": cur_frm.doc.item_code}};});\ncur_frm.set_query(\"preliminar_inspector\", function() {return {\"filters\": {\"inspector\": \"1\"}};});\ncur_frm.set_query(\"pretest_inspector\", function() {return {\"filters\": {\"inspector\": \"1\"}};});\ncur_frm.set_query(\"teardown_inspector\", function() {return {\"filters\": {\"inspector\": \"1\"}};});\ncur_frm.set_query(\"corrective_inspector\", function() {return {\"filters\": {\"inspector\": \"1\"}};});\ncur_frm.set_query(\"final_inspector\", function() {return {\"filters\": {\"inspector\": \"1\"}};});\n$('input[data-fieldname=\"expected_start_date\"]').css(\"background-color\",\"#e55d2a\");\n$('input[data-fieldname=\"expected_end_date\"]').css(\"background-color\",\"#e55d2a\");\n$(\"[data-fieldname=head_part_number]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_related]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_customer_details]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_customer_details]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_manual_reference]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_reason_removal]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_preliminar]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_pre_test]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_hidden_damage]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_teardown]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_assets_list]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_corrective_actions]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_final_inspection]\").css('background-color', '#92c7e5');\n\nfrappe.ui.form.on(\"Project\", {\"item_code\": function(frm){frm.set_value(\"outgoing_item\",frm.doc.item_code);}});\nfrappe.ui.form.on(\"Project\", {\"item_name\": function(frm){frm.set_value(\"outgoing_name\",frm.doc.item_name);}});\nfrappe.ui.form.on(\"Project\", {\"manufacturer\": function(frm){frm.set_value(\"outgoing_manufacturer\",frm.doc.manufacturer);}});\nfrappe.ui.form.on(\"Project\", {\"serial_no\": function(frm){frm.set_value(\"outgoing_serial_no\",frm.doc.serial_no);}});\n}\ncur_frm.cscript.custom_onload = cur_frm.cscript.custom_settings;\n\nfrappe.ui.form.on(\"Project\", \"item_code\", function(frm,cdt,cdn) {\nfrappe.model.with_doc(\"Capabilities\", frm.doc.item_code, function() {\nvar tabletransfer = frappe.model.get_doc(\"Capabilities\", frm.doc.item_code);\ncur_frm.clear_table(\"assets\");\n$.each(tabletransfer.assets || [], function(i, d) {\nfrm.add_child(\"assets\");\ncur_frm.doc.assets[i].partnumber = d.partnumber;\ncur_frm.doc.assets[i].description = d.description;\ncur_frm.refresh_field(\"assets\");\n})\n})\n})\nfrappe.ui.form.on(\"Project\", \"title\", function(frm) {\n   frappe.model.get_value( \"Terms and Conditions\", { \"Title\":  frm.doc.title}, \"terms\", function(d){\n     var text = d.terms;\n     frm.set_value( \"terms\",  text);   \n   });   \n});",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Manuals",
  "modified": "2019-07-01 08:41:56.725279",
  "name": "Manuals-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Manuals\", \"onload\", function(frm) {cur_frm.set_query(\"manual_item\", function() {\n    return {\"filters\": {\"item_group\": \"MANUAL\",}};\n    });\n});\n",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Capabilities",
  "modified": "2020-01-23 08:16:26.529518",
  "name": "Capabilities-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Capabilities\", \"onload\", function(frm) {cur_frm.set_query(\"item_code\", function() {\n    return {\"filters\": {\"item_group\": \"ROTABLE (Units)\"}};\n    });\n});\nfrappe.ui.form.on(\"Capabilities\", \"refresh\", function(frm) {cur_frm.set_value('cap_part_number', frm.doc.item_code);});\n",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Manual PartNumber",
  "modified": "2019-07-01 08:44:29.411806",
  "name": "Manual PartNumber-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Manual PartNumber\", \"onload\", function(frm) {cur_frm.set_query(\"item_code\", function() {\n    return {\"filters\": {\"item_group\": \"ROTABLE (Units)\",}};\n    });\n});",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Serial No",
  "modified": "2019-07-13 11:10:26.223549",
  "name": "Serial No-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Serial No\", \"refresh\", function(frm) {cur_frm.set_query(\"work_order\", function() {\n        return {\"filters\": {\"serial_no\": cur_frm.doc.serial_no}};\n    });\n});\nfrappe.call({\n    \tmethod:\"frappe.client.get_value\",\n    \targs: {\n\tdoctype: 'Project', \n\tfieldname: 'work_order',\n       \tfilters: { 'item_code': cur_frm.doc.item_code, 'serial_no': cur_frm.doc.serial_no}},\ncallback: function(r) { cur_frm.add_fetch('project', 'work_order', 'work_order'); cur_frm.set_value('work_order', r.message.work_order);}\n});",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Invoice",
  "modified": "2019-08-13 13:04:42.664261",
  "name": "Sales Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.listview_settings[\"Sales Invoice\"] = {\n\tadd_fields: [\"customer\", \"customer_name\", \"base_grand_total\", \"outstanding_amount\", \"due_date\", \"company\",\n\t\t\"currency\", \"is_return\"],\n\tget_indicator: function(doc) {\n\t\tvar status_color = {\n\t\t\t\"Draft\": \"grey\",\n\t\t\t\"Unpaid\": \"orange\",\n\t\t\t\"Paid\": \"green\",\n\t\t\t\"Return\": \"darkgrey\",\n\t\t\t\"Credit Note Issued\": \"darkgrey\",\n\t\t\t\"Unpaid and Discounted\": \"orange\",\n\t\t\t\"Overdue and Discounted\": \"red\",\n\t\t\t\"Overdue\": \"red\"\n\n\t\t};\n\t\treturn [__(doc.status), status_color[doc.status], \"status,=,\"+doc.status];\n\t},\n\tright_column: \"grand_total\"\n};",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Sales Order",
  "modified": "2020-02-18 16:56:36.140494",
  "name": "Sales Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Sales Order\", \"onload\", function(frm) {var delivery_date = frappe.datetime.add_days(frm.doc.transaction_date, 10);\nif (frm.doc.delivery_date == null){\nfrm.set_value(\"delivery_date\", delivery_date);}\n})\n\ncur_frm.cscript.custom_sales = function(doc) {\ncur_frm.set_value(\"grand_total_usd\",cur_frm.doc.grand_total);\n$('input[data-fieldname=\"delivery_date\"]').css(\"background-color\",\"#e55d2a\");\n}\ncur_frm.cscript.custom_onload = cur_frm.cscript.custom_sales;\n",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Purchase Order",
  "modified": "2020-02-18 16:57:45.797385",
  "name": "Purchase Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Purchase Order\", \"onload\", function(frm) {var schedule_date = frappe.datetime.add_days(frm.doc.transaction_date, 10);\nif (frm.doc.schedule_date == null){\nfrm.set_value(\"schedule_date\", schedule_date);}\n})\n\ncur_frm.cscript.custom_sales = function(doc) {\n$('input[data-fieldname=\"schedule_date\"]').css(\"background-color\",\"#e55d2a\");\n}\ncur_frm.cscript.custom_onload = cur_frm.cscript.custom_sales;",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Item",
  "modified": "2020-02-14 10:58:30.383100",
  "name": "Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "cur_frm.cscript.manufacturer_part_no = function(doc) {cur_frm.set_value(\"manufacturer_part_no\",cur_frm.doc.item_code);}\ncur_frm.cscript.custom_onload = cur_frm.cscript.manufacturer_part_no;\ncur_frm.refresh_field(\"manual\");",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Item Price",
  "modified": "2020-02-05 14:44:16.764077",
  "name": "Item Price-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Item Price\", {\"refresh\": function(frm){frm.set_value(\"price_condition\",frm.doc.price_list);}});",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Quotation Item",
  "modified": "2020-02-11 13:16:21.283942",
  "name": "Quotation Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Quotation Item\", \"refresh\", function(frm) {cur_frm.set_query(\"rate\", function() {\n        return {\"filters\": {\"item_code\": cur_frm.doc.item_code}};\n    });\n});\nfrappe.ui.form.on(\"Quotation Item\", {\"refresh\": function(frm){frm.set_value(\"price_list_rate\",frm.doc.rate);}});\n",
  "script_type": "Client"
 },
 {
  "docstatus": 0,
  "doctype": "Custom Script",
  "dt": "Quotation",
  "modified": "2020-02-20 11:36:43.241086",
  "name": "Quotation-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Quotation\", {\"onload\": function(frm){\n$(\"[data-fieldname=head_quote_detail]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_manual_detail]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_parts_detail]\").css('background-color', '#92c7e5');\n$(\"[data-fieldname=head_assets_list]\").css('background-color', '#92c7e5');\n}});\n\nfrappe.ui.form.on(\"Quotation\", {\"outgoing_item\": function(frm){frm.set_value(\"item_code\",frm.doc.outgoing_item);}});\nfrappe.ui.form.on(\"Quotation\", \"item_code\", function(frm,cdt,cdn) {\nfrappe.model.with_doc(\"Capabilities\", frm.doc.item_code, function() {\nvar tabletransfer = frappe.model.get_doc(\"Capabilities\", frm.doc.item_code);\ncur_frm.clear_table(\"assets\");\n$.each(tabletransfer.assets || [], function(i, d) {\nfrm.add_child(\"assets\");\ncur_frm.doc.assets[i].partnumber = d.partnumber;\ncur_frm.doc.assets[i].description = d.description;\ncur_frm.refresh_field(\"assets\");\n})\n})\n})\nfrappe.ui.form.on(\"Quotation\", \"refresh\", function(frm){\nif (frm.doc.wo_order_type === \"Work Order\"){\ncur_frm.set_value('quote_order_type', cur_frm.doc.wo_order_type);\ncur_frm.set_value('party_name', cur_frm.doc.customer);\ncur_frm.set_value('naming_series', cur_frm.doc.work_order);\ncur_frm.save_field(\"party_name\");\ncur_frm.save_field(\"naming_series\");\nfrm.toggle_display(\"naming_series\", false);\nfrm.toggle_display(\"customer_name\", false);\n}\n})\nfrappe.ui.form.on(\"Quotation\", \"refresh\", function(frm){\nif (frm.doc.quote_order_type === \"Repair\"){\ncur_frm.set_value('naming_series',\"Q-REPAIR-.#####.-.YY.\");\nfrm.toggle_display(\"naming_series\", false);\n}\n})\nfrappe.ui.form.on(\"Quotation\", \"refresh\", function(frm){\nif (frm.doc.quote_order_type === \"Sales\"){\ncur_frm.set_value('naming_series',\"Q-SALE-.#####.-.YY.\");\nfrm.toggle_display(\"naming_series\", false);\n}\n})\nfrappe.ui.form.on(\"Quotation\", { \"onload\": function(frm) {\nvar d = frappe.model.get_value(\"Quotation Item\",frm.name,\"condition\");\nvar rp = d.search(\"- RP\");\nvar bc = d.search(\"- BC\");\nvar oh = d.search(\"- OH\");\nif ( rp != \"-1\" ) { \ncur_frm.set_value(\"condition\",\"RP\");\n}\nelse if ( bc != \"-1\" ) { \ncur_frm.set_value(\"condition\",\"BC\");\n}\nelse if ( oh != \"-1\" ) { \ncur_frm.set_value(\"condition\",\"OH\");\n}\ncur_frm.set_value(\"selling_price_list\", cur_frm.doc.condition);\ncur_frm.save_field(\"selling_price_list\");\n}\n});\n",
  "script_type": "Client"
 }
]